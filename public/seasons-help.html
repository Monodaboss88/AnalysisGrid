<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÜ Seasons Tab - Interactive Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #0f1419;
            --bg-tertiary: #151c28;
            --text-primary: #e8edf5;
            --text-secondary: #8b95a5;
            --text-muted: #4a5568;
            --accent-cyan: #00f5d4;
            --accent-green: #4ade80;
            --accent-red: #ff3b5c;
            --accent-yellow: #ffc800;
            --accent-purple: #9d4edd;
            --border-subtle: rgba(255, 255, 255, 0.06);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
        }

        .container { max-width: 1200px; margin: 0 auto; }

        h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle { color: var(--text-secondary); margin-bottom: 2rem; }

        .section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-subtle);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title .icon { font-size: 1.4rem; }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .concept-card {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            border-left: 3px solid var(--accent-cyan);
        }

        .concept-card h3 {
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            color: var(--accent-cyan);
        }

        .concept-card p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .demo-section {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .demo-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--accent-yellow);
            margin-bottom: 1rem;
        }

        .example-btn {
            background: linear-gradient(135deg, var(--accent-purple), #7c3aed);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            margin: 0.25rem;
            transition: all 0.2s;
        }

        .example-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(157, 78, 221, 0.4);
        }

        .example-btn.green { background: linear-gradient(135deg, var(--accent-green), #22c55e); }
        .example-btn.red { background: linear-gradient(135deg, var(--accent-red), #ef4444); }
        .example-btn.cyan { background: linear-gradient(135deg, var(--accent-cyan), #06b6d4); color: #0a0e17; }
        .example-btn.yellow { background: linear-gradient(135deg, var(--accent-yellow), #f59e0b); color: #0a0e17; }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .stat-card {
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 0.75rem;
            text-align: center;
        }

        .stat-value { font-size: 1.3rem; font-weight: 700; }
        .stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; }
        .stat-card.green .stat-value { color: var(--accent-green); }
        .stat-card.red .stat-value { color: var(--accent-red); }
        .stat-card.cyan .stat-value { color: var(--accent-cyan); }
        .stat-card.yellow .stat-value { color: var(--accent-yellow); }
        .stat-card.purple .stat-value { color: var(--accent-purple); }

        /* Milestone badges */
        .milestone-row {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .badge {
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            border: 2px solid;
        }

        .badge.achieved { opacity: 1; }
        .badge.locked { opacity: 0.4; background: var(--bg-tertiary); border-color: var(--border-subtle); color: var(--text-muted); }

        /* Progress bar */
        .progress-container {
            background: var(--bg-primary);
            border-radius: 6px;
            height: 24px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        /* R Calculator */
        .calc-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
        }

        .calc-card {
            background: var(--bg-primary);
            padding: 0.75rem;
            border-radius: 6px;
            text-align: center;
        }

        .calc-label { font-size: 0.7rem; color: var(--text-muted); }
        .calc-value { font-size: 1.1rem; font-weight: 600; }

        /* Equity curve */
        .equity-container {
            background: var(--bg-primary);
            border-radius: 6px;
            padding: 0.5rem;
            height: 140px;
        }

        /* Week bracket */
        .week-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem 0;
        }

        .week-card {
            min-width: 200px;
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 0.75rem;
            border-left: 3px solid;
        }

        .week-header {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .week-meta {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .trade-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.3rem 0.5rem;
            background: var(--bg-tertiary);
            border-radius: 4px;
            font-size: 0.75rem;
            margin-bottom: 0.25rem;
        }

        .recovery-box {
            background: var(--bg-primary);
            border-radius: 6px;
            padding: 1rem;
            margin-top: 0.75rem;
        }

        .recovery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            text-align: center;
            margin-top: 0.5rem;
        }

        .legend {
            display: flex;
            gap: 1rem;
            justify-content: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        .back-link {
            display: inline-block;
            margin-top: 2rem;
            color: var(--accent-cyan);
            text-decoration: none;
            font-weight: 500;
        }

        .back-link:hover { text-decoration: underline; }

        .tooltip {
            background: var(--bg-tertiary);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.85rem;
        }

        .tooltip-title {
            color: var(--accent-cyan);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: repeat(3, 1fr); }
            .calc-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÜ Seasons Tab - Interactive Guide</h1>
        <p class="subtitle">Learn how to track your trading performance with visual brackets, milestones, and recovery tracking</p>

        <!-- What is a Season? -->
        <div class="section">
            <div class="section-title"><span class="icon">üìñ</span> What is a Season?</div>
            <div class="concept-grid">
                <div class="concept-card">
                    <h3>Trading Season</h3>
                    <p>A defined period (week, month, quarter) to track your trades as a cohesive unit. Like sports seasons, you reset and start fresh!</p>
                </div>
                <div class="concept-card">
                    <h3>R-Multiple Tracking</h3>
                    <p>Every trade is measured in "R" - your risk unit. A 2R win means you made 2x your risked amount. A -1R loss means you lost your risk.</p>
                </div>
                <div class="concept-card">
                    <h3>Recovery Compensation</h3>
                    <p>When you lose, the system calculates exactly how many winning trades you need to get back to your peak equity.</p>
                </div>
                <div class="concept-card">
                    <h3>Milestone Achievements</h3>
                    <p>Unlock badges as you grow your account: 10%, 25%, 50%, 75%, 100%+ and beyond. Gamify your trading journey!</p>
                </div>
            </div>
        </div>

        <!-- Interactive Demo -->
        <div class="section">
            <div class="section-title"><span class="icon">üéÆ</span> Interactive Demo</div>
            <p style="color: var(--text-secondary); margin-bottom: 1rem;">Click a scenario below to see how the Seasons tab displays different trading situations:</p>
            
            <div style="margin-bottom: 1rem;">
                <button class="example-btn green" onclick="loadScenario('winning')">üìà Winning Streak (+8R)</button>
                <button class="example-btn red" onclick="loadScenario('losing')">üìâ In Drawdown (-3R)</button>
                <button class="example-btn cyan" onclick="loadScenario('recovery')">üîÑ Recovery Mode (+2R)</button>
                <button class="example-btn yellow" onclick="loadScenario('milestone')">üèÜ 100% Milestone!</button>
                <button class="example-btn" onclick="loadScenario('mixed')">‚öñÔ∏è Mixed Results</button>
            </div>

            <div class="demo-section">
                <div class="demo-title">üìä Season Stats</div>
                
                <!-- Stats Grid -->
                <div class="stats-grid" id="demo-stats">
                    <div class="stat-card green">
                        <div class="stat-value" id="stat-r">+5.2R</div>
                        <div class="stat-label">Total R</div>
                    </div>
                    <div class="stat-card cyan">
                        <div class="stat-value" id="stat-pct">+12.4%</div>
                        <div class="stat-label">Total %</div>
                    </div>
                    <div class="stat-card green">
                        <div class="stat-value" id="stat-wins">7</div>
                        <div class="stat-label">Wins</div>
                    </div>
                    <div class="stat-card red">
                        <div class="stat-value" id="stat-losses">3</div>
                        <div class="stat-label">Losses</div>
                    </div>
                    <div class="stat-card yellow">
                        <div class="stat-value" id="stat-recover">‚úÖ</div>
                        <div class="stat-label">To Recover</div>
                    </div>
                    <div class="stat-card purple">
                        <div class="stat-value" id="stat-status">üü¢</div>
                        <div class="stat-label">Status</div>
                    </div>
                </div>

                <!-- R Calculator -->
                <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 0.85rem; font-weight: 600; color: var(--accent-cyan); margin-bottom: 0.75rem;">üìä R-Multiple Recovery Calculator</div>
                    <div class="calc-grid">
                        <div class="calc-card">
                            <div class="calc-label">Max Drawdown</div>
                            <div class="calc-value" id="calc-dd" style="color: var(--accent-red);">1.5R</div>
                        </div>
                        <div class="calc-card">
                            <div class="calc-label">Win Rate</div>
                            <div class="calc-value" id="calc-wr" style="color: var(--accent-yellow);">70%</div>
                        </div>
                        <div class="calc-card">
                            <div class="calc-label">Avg Win</div>
                            <div class="calc-value" id="calc-avgw" style="color: var(--accent-green);">+1.8R</div>
                        </div>
                        <div class="calc-card">
                            <div class="calc-label">Avg Loss</div>
                            <div class="calc-value" id="calc-avgl" style="color: var(--accent-red);">-1.0R</div>
                        </div>
                    </div>
                    <div class="recovery-box" id="recovery-plan">
                        <div style="color: var(--accent-green); font-weight: 600;">‚úÖ At Peak! No recovery needed</div>
                        <div style="margin-top: 0.5rem;">Expectancy: <span style="color: var(--accent-green); font-weight: 600;">+0.96R</span> per trade</div>
                    </div>
                </div>

                <!-- Equity Curve -->
                <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 0.85rem; font-weight: 600; color: var(--accent-purple); margin-bottom: 0.75rem;">üìà Performance Path</div>
                    <div class="equity-container" id="equity-curve"></div>
                    <div class="legend">
                        <span><span style="color: var(--accent-green);">‚óè</span> Winning trade</span>
                        <span><span style="color: var(--accent-red);">‚óè</span> Losing trade</span>
                        <span><span style="color: var(--accent-cyan);">---</span> Peak</span>
                    </div>
                </div>

                <!-- Milestones -->
                <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 0.85rem; font-weight: 600; color: var(--accent-yellow); margin-bottom: 0.75rem;">üéØ Milestone Progress</div>
                    <div class="milestone-row" id="milestone-badges"></div>
                    <div class="progress-container">
                        <div class="progress-fill" id="milestone-fill" style="width: 50%; background: linear-gradient(90deg, #ffd700, #ff6b35);"></div>
                        <div class="progress-text" id="milestone-text">12.4% ‚Üí ü•à 25% (12.6% to go)</div>
                    </div>
                </div>

                <!-- Week Bracket -->
                <div style="background: var(--bg-secondary); border-radius: 8px; padding: 1rem;">
                    <div style="font-size: 0.85rem; font-weight: 600; color: var(--accent-cyan); margin-bottom: 0.75rem;">üìÖ Weekly Bracket View</div>
                    <div class="week-container" id="week-bracket"></div>
                </div>
            </div>
        </div>

        <!-- Understanding R-Multiples -->
        <div class="section">
            <div class="section-title"><span class="icon">üéì</span> Understanding R-Multiples</div>
            <div class="tooltip">
                <div class="tooltip-title">What is R?</div>
                <p>R = Your risk per trade. If you risk $100 on a trade:</p>
                <ul style="margin: 0.5rem 0 0.5rem 1.5rem; color: var(--text-secondary);">
                    <li><strong style="color: var(--accent-green);">+2R</strong> = You made $200 (2x your risk)</li>
                    <li><strong style="color: var(--accent-green);">+1R</strong> = You made $100 (1x your risk)</li>
                    <li><strong style="color: var(--accent-red);">-1R</strong> = You lost $100 (your full risk)</li>
                    <li><strong style="color: var(--accent-red);">-0.5R</strong> = You lost $50 (half your risk - stopped out early)</li>
                </ul>
            </div>

            <div class="tooltip" style="margin-top: 1rem;">
                <div class="tooltip-title">Recovery Math</div>
                <p>After a loss, you need <em>more</em> than a 1R win to recover because your account is smaller:</p>
                <ul style="margin: 0.5rem 0 0.5rem 1.5rem; color: var(--text-secondary);">
                    <li>Lose 1R (-10% if risking 10%) ‚Üí Need +1.11R to get back to even</li>
                    <li>The Seasons tab calculates this automatically!</li>
                </ul>
            </div>
        </div>

        <!-- Status Meanings -->
        <div class="section">
            <div class="section-title"><span class="icon">üö¶</span> Status Indicators</div>
            <div class="concept-grid">
                <div class="concept-card" style="border-left-color: var(--accent-green);">
                    <h3>üü¢ At Peak</h3>
                    <p>You're at or above your highest equity point. No recovery needed - keep crushing it!</p>
                </div>
                <div class="concept-card" style="border-left-color: var(--accent-yellow);">
                    <h3>üü° Recovering</h3>
                    <p>You're in a small drawdown (less than 2R from peak). A few good trades will get you back!</p>
                </div>
                <div class="concept-card" style="border-left-color: var(--accent-red);">
                    <h3>üî¥ In Drawdown</h3>
                    <p>You're 2R+ below your peak. Focus on your process, reduce size if needed, and work the recovery plan.</p>
                </div>
            </div>
        </div>

        <!-- How to Use -->
        <div class="section">
            <div class="section-title"><span class="icon">üõ†Ô∏è</span> How to Use Seasons</div>
            <ol style="margin-left: 1.5rem; color: var(--text-secondary);">
                <li style="margin-bottom: 0.75rem;"><strong style="color: var(--text-primary);">Create a Season:</strong> Click "New Season" and name it (e.g., "January 2026" or "Q1 2026")</li>
                <li style="margin-bottom: 0.75rem;"><strong style="color: var(--text-primary);">Add Trades:</strong> Click "+ Add Trade" for each closed trade. Enter symbol, direction, R-multiple, and % gain</li>
                <li style="margin-bottom: 0.75rem;"><strong style="color: var(--text-primary);">Import Existing:</strong> Use "üì• Import from Pending" to pull in trades from your Trades tab</li>
                <li style="margin-bottom: 0.75rem;"><strong style="color: var(--text-primary);">Track Progress:</strong> Watch your equity curve, milestone progress, and recovery stats update in real-time</li>
                <li style="margin-bottom: 0.75rem;"><strong style="color: var(--text-primary);">Switch Seasons:</strong> Click any season button to compare different time periods</li>
            </ol>
        </div>

        <a href="unified_ui_v2.html" class="back-link">‚Üê Back to Decision Point Scanner</a>
    </div>

    <script>
        const scenarios = {
            winning: {
                stats: { r: '+8.2R', pct: '+18.5%', wins: 9, losses: 2, recover: '‚úÖ', status: 'üü¢' },
                calc: { dd: '1.2R', wr: '82%', avgw: '+1.5R', avgl: '-1.0R' },
                recovery: { atPeak: true, expectancy: 1.03 },
                curve: [0, 1.5, 2.5, 1.5, 3, 4.5, 5.5, 4.5, 6, 7.5, 8.2],
                peak: 8.2,
                milestones: 18.5,
                weeks: [
                    { label: 'Week 1', r: 2.5, pct: 5.2, wins: 3, losses: 1, trades: [
                        { sym: 'NVDA', dir: 'LONG', r: 1.5, pct: 3.2 },
                        { sym: 'AAPL', dir: 'LONG', r: 1.0, pct: 2.1 },
                        { sym: 'META', dir: 'SHORT', r: -1.0, pct: -2.0 },
                        { sym: 'TSLA', dir: 'LONG', r: 1.0, pct: 1.9 }
                    ]},
                    { label: 'Week 2', r: 3.5, pct: 7.8, wins: 4, losses: 0, trades: [
                        { sym: 'AMD', dir: 'LONG', r: 2.0, pct: 4.5 },
                        { sym: 'GOOGL', dir: 'LONG', r: 0.5, pct: 1.1 },
                        { sym: 'MSFT', dir: 'LONG', r: 0.5, pct: 1.2 },
                        { sym: 'SPY', dir: 'LONG', r: 0.5, pct: 1.0 }
                    ]},
                    { label: 'Week 3', r: 2.2, pct: 5.5, wins: 2, losses: 1, trades: [
                        { sym: 'AMZN', dir: 'LONG', r: 2.2, pct: 4.8 },
                        { sym: 'COIN', dir: 'SHORT', r: -1.0, pct: -1.8 },
                        { sym: 'NFLX', dir: 'LONG', r: 1.0, pct: 2.5 }
                    ]}
                ]
            },
            losing: {
                stats: { r: '-3.0R', pct: '-6.5%', wins: 2, losses: 5, recover: '4.5R', status: 'üî¥' },
                calc: { dd: '4.5R', wr: '29%', avgw: '+1.25R', avgl: '-1.1R' },
                recovery: { atPeak: false, expectancy: -0.42, toRecover: 4.5, winsNeeded: 4, tradesNeeded: '?' },
                curve: [0, 1.5, 0.5, -0.5, 0.5, -0.5, -1.5, -3.0],
                peak: 1.5,
                milestones: -6.5,
                weeks: [
                    { label: 'Week 1', r: 0.5, pct: 1.2, wins: 2, losses: 1, trades: [
                        { sym: 'NVDA', dir: 'LONG', r: 1.5, pct: 3.2 },
                        { sym: 'AAPL', dir: 'LONG', r: -1.0, pct: -2.0 }
                    ]},
                    { label: 'Week 2', r: -3.5, pct: -7.7, wins: 0, losses: 4, trades: [
                        { sym: 'META', dir: 'SHORT', r: -1.0, pct: -2.0 },
                        { sym: 'TSLA', dir: 'LONG', r: -1.0, pct: -1.9 },
                        { sym: 'AMD', dir: 'LONG', r: -1.0, pct: -2.1 },
                        { sym: 'COIN', dir: 'SHORT', r: -0.5, pct: -1.7 }
                    ]}
                ]
            },
            recovery: {
                stats: { r: '+2.0R', pct: '+4.8%', wins: 5, losses: 4, recover: '1.5R', status: 'üü°' },
                calc: { dd: '3.5R', wr: '56%', avgw: '+1.4R', avgl: '-1.0R' },
                recovery: { atPeak: false, expectancy: 0.34, toRecover: 1.5, winsNeeded: 2, tradesNeeded: 5 },
                curve: [0, 1.5, 3.5, 2.5, 1.5, 0.5, 1.5, 2.5, 2.0],
                peak: 3.5,
                milestones: 4.8,
                weeks: [
                    { label: 'Week 1', r: 3.5, pct: 7.5, wins: 3, losses: 0, trades: [
                        { sym: 'NVDA', dir: 'LONG', r: 1.5, pct: 3.2 },
                        { sym: 'AMD', dir: 'LONG', r: 1.5, pct: 3.0 },
                        { sym: 'TSLA', dir: 'LONG', r: 0.5, pct: 1.3 }
                    ]},
                    { label: 'Week 2', r: -3.0, pct: -6.2, wins: 0, losses: 3, trades: [
                        { sym: 'META', dir: 'SHORT', r: -1.0, pct: -2.0 },
                        { sym: 'AAPL', dir: 'LONG', r: -1.0, pct: -2.1 },
                        { sym: 'GOOGL', dir: 'LONG', r: -1.0, pct: -2.1 }
                    ]},
                    { label: 'Week 3', r: 1.5, pct: 3.5, wins: 2, losses: 1, trades: [
                        { sym: 'SPY', dir: 'LONG', r: 1.0, pct: 2.2 },
                        { sym: 'QQQ', dir: 'LONG', r: 1.0, pct: 2.1 },
                        { sym: 'IWM', dir: 'LONG', r: -0.5, pct: -0.8 }
                    ]}
                ]
            },
            milestone: {
                stats: { r: '+42.5R', pct: '+105.2%', wins: 38, losses: 12, recover: '‚úÖ', status: 'üü¢' },
                calc: { dd: '5.0R', wr: '76%', avgw: '+1.5R', avgl: '-1.0R' },
                recovery: { atPeak: true, expectancy: 0.90 },
                curve: [0, 5, 10, 8, 15, 20, 18, 25, 30, 35, 40, 42.5],
                peak: 42.5,
                milestones: 105.2,
                weeks: [
                    { label: 'Wk 1-4', r: 15, pct: 35, wins: 12, losses: 3, trades: [{ sym: 'Various', dir: 'LONG', r: 15, pct: 35 }] },
                    { label: 'Wk 5-8', r: 12, pct: 30, wins: 10, losses: 4, trades: [{ sym: 'Various', dir: 'LONG', r: 12, pct: 30 }] },
                    { label: 'Wk 9-12', r: 15.5, pct: 40.2, wins: 16, losses: 5, trades: [{ sym: 'Various', dir: 'LONG', r: 15.5, pct: 40.2 }] }
                ]
            },
            mixed: {
                stats: { r: '+3.5R', pct: '+7.8%', wins: 6, losses: 5, recover: '‚úÖ', status: 'üü¢' },
                calc: { dd: '2.5R', wr: '55%', avgw: '+1.42R', avgl: '-1.0R' },
                recovery: { atPeak: true, expectancy: 0.33 },
                curve: [0, 1.5, 0.5, 2.0, 1.0, 2.5, 1.5, 3.0, 2.0, 3.5, 4.0, 3.5],
                peak: 4.0,
                milestones: 7.8,
                weeks: [
                    { label: 'Week 1', r: 1.0, pct: 2.2, wins: 2, losses: 2, trades: [
                        { sym: 'NVDA', dir: 'LONG', r: 1.5, pct: 3.2 },
                        { sym: 'META', dir: 'SHORT', r: -1.0, pct: -2.0 },
                        { sym: 'AAPL', dir: 'LONG', r: 1.5, pct: 3.0 },
                        { sym: 'TSLA', dir: 'SHORT', r: -1.0, pct: -2.0 }
                    ]},
                    { label: 'Week 2', r: 1.5, pct: 3.4, wins: 2, losses: 2, trades: [
                        { sym: 'AMD', dir: 'LONG', r: 1.5, pct: 3.1 },
                        { sym: 'GOOGL', dir: 'LONG', r: -1.0, pct: -1.9 },
                        { sym: 'MSFT', dir: 'LONG', r: 1.5, pct: 3.2 },
                        { sym: 'AMZN', dir: 'SHORT', r: -0.5, pct: -1.0 }
                    ]},
                    { label: 'Week 3', r: 1.0, pct: 2.2, wins: 2, losses: 1, trades: [
                        { sym: 'SPY', dir: 'LONG', r: 1.0, pct: 2.2 },
                        { sym: 'QQQ', dir: 'LONG', r: 0.5, pct: 1.0 },
                        { sym: 'IWM', dir: 'SHORT', r: -0.5, pct: -1.0 }
                    ]}
                ]
            }
        };

        const milestones = [
            { pct: 10, icon: 'ü•â', label: '10%', color: '#cd7f32' },
            { pct: 25, icon: 'ü•à', label: '25%', color: '#c0c0c0' },
            { pct: 50, icon: 'ü•á', label: '50%', color: '#ffd700' },
            { pct: 75, icon: 'üíé', label: '75%', color: '#00f5d4' },
            { pct: 100, icon: 'üèÜ', label: '100%', color: '#ffc800' },
            { pct: 150, icon: 'üî•', label: '150%', color: '#ff6b35' },
            { pct: 200, icon: '‚ö°', label: '200%', color: '#9d4edd' }
        ];

        function loadScenario(name) {
            const s = scenarios[name];
            
            // Stats
            document.getElementById('stat-r').textContent = s.stats.r;
            document.getElementById('stat-r').style.color = s.stats.r.startsWith('+') ? 'var(--accent-green)' : 'var(--accent-red)';
            document.getElementById('stat-pct').textContent = s.stats.pct;
            document.getElementById('stat-pct').style.color = s.stats.pct.startsWith('+') ? 'var(--accent-green)' : 'var(--accent-red)';
            document.getElementById('stat-wins').textContent = s.stats.wins;
            document.getElementById('stat-losses').textContent = s.stats.losses;
            document.getElementById('stat-recover').textContent = s.stats.recover;
            document.getElementById('stat-status').textContent = s.stats.status;

            // Calculator
            document.getElementById('calc-dd').textContent = s.calc.dd;
            document.getElementById('calc-wr').textContent = s.calc.wr;
            document.getElementById('calc-avgw').textContent = s.calc.avgw;
            document.getElementById('calc-avgl').textContent = s.calc.avgl;

            // Recovery plan
            const recPlan = document.getElementById('recovery-plan');
            if (s.recovery.atPeak) {
                recPlan.innerHTML = `
                    <div style="color: var(--accent-green); font-weight: 600;">‚úÖ At Peak! No recovery needed</div>
                    <div style="margin-top: 0.5rem;">Expectancy: <span style="color: var(--accent-green); font-weight: 600;">+${s.recovery.expectancy.toFixed(2)}R</span> per trade</div>
                `;
            } else {
                recPlan.innerHTML = `
                    <div style="color: var(--accent-yellow); font-weight: 600; margin-bottom: 0.5rem;">üö® Recovery Needed: ${s.recovery.toRecover.toFixed(1)}R to peak</div>
                    <div class="recovery-grid">
                        <div>
                            <div style="color: var(--accent-green); font-size: 1.2rem; font-weight: 600;">${s.recovery.winsNeeded}</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">Wins Needed</div>
                        </div>
                        <div>
                            <div style="color: var(--accent-cyan); font-size: 1.2rem; font-weight: 600;">${s.recovery.tradesNeeded}</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">Expected Trades</div>
                        </div>
                        <div>
                            <div style="color: ${s.recovery.expectancy >= 0 ? 'var(--accent-purple)' : 'var(--accent-red)'}; font-size: 1.2rem; font-weight: 600;">${s.recovery.expectancy >= 0 ? '+' : ''}${s.recovery.expectancy.toFixed(2)}R</div>
                            <div style="font-size: 0.7rem; color: var(--text-muted);">Expectancy</div>
                        </div>
                    </div>
                `;
            }

            // Equity curve
            renderEquityCurve(s.curve, s.peak);

            // Milestones
            renderMilestones(s.milestones);

            // Week bracket
            renderWeeks(s.weeks);
        }

        function renderEquityCurve(curve, peak) {
            const container = document.getElementById('equity-curve');
            const width = container.clientWidth || 400;
            const height = 120;
            const padding = 15;

            const minR = Math.min(...curve, 0);
            const maxR = Math.max(...curve, peak, 1);
            const range = maxR - minR || 1;

            let segments = '';
            const points = curve.map((r, i) => ({
                x: padding + (i / (curve.length - 1)) * (width - 2 * padding),
                y: height - padding - ((r - minR) / range) * (height - 2 * padding),
                r
            }));

            for (let i = 1; i < points.length; i++) {
                const prev = points[i - 1];
                const curr = points[i];
                const color = curr.r >= prev.r ? 'var(--accent-green)' : 'var(--accent-red)';
                segments += `<line x1="${prev.x}" y1="${prev.y}" x2="${curr.x}" y2="${curr.y}" stroke="${color}" stroke-width="2.5" stroke-linecap="round"/>`;
            }

            const zeroY = height - padding - ((0 - minR) / range) * (height - 2 * padding);
            const peakY = height - padding - ((peak - minR) / range) * (height - 2 * padding);
            const finalR = curve[curve.length - 1];

            container.innerHTML = `
                <svg width="100%" height="${height}" viewBox="0 0 ${width} ${height}" preserveAspectRatio="none">
                    <line x1="${padding}" y1="${zeroY}" x2="${width - padding}" y2="${zeroY}" stroke="var(--border-subtle)" stroke-width="1" stroke-dasharray="4,4"/>
                    ${peak > 0 ? `<line x1="${padding}" y1="${peakY}" x2="${width - padding}" y2="${peakY}" stroke="var(--accent-cyan)" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>` : ''}
                    ${segments}
                    ${points.map(p => `<circle cx="${p.x}" cy="${p.y}" r="4" fill="${p.r >= 0 ? 'var(--accent-green)' : 'var(--accent-red)'}" stroke="var(--bg-primary)" stroke-width="1.5"/>`).join('')}
                </svg>
                <div style="position: absolute; right: 10px; top: 5px; font-size: 0.75rem; color: ${finalR >= 0 ? 'var(--accent-green)' : 'var(--accent-red)'}; font-weight: 600;">
                    ${finalR >= 0 ? '+' : ''}${finalR.toFixed(1)}R
                </div>
            `;
        }

        function renderMilestones(totalPct) {
            const container = document.getElementById('milestone-badges');
            const fill = document.getElementById('milestone-fill');
            const text = document.getElementById('milestone-text');

            let html = '';
            let nextMilestone = milestones[0];
            let prevMilestone = { pct: 0, color: '#4ade80' };

            milestones.forEach(m => {
                const achieved = totalPct >= m.pct;
                if (achieved) prevMilestone = m;
                else if (nextMilestone.pct <= prevMilestone.pct) nextMilestone = m;
                
                html += `
                    <div class="badge ${achieved ? 'achieved' : 'locked'}" style="${achieved ? `background: ${m.color}20; border-color: ${m.color}; color: ${m.color};` : ''}">
                        <span>${m.icon}</span>
                        <span>${m.label}</span>
                        ${achieved ? '<span style="font-size: 0.6rem;">‚úì</span>' : ''}
                    </div>
                `;

                if (!achieved && nextMilestone.pct > m.pct) {
                    nextMilestone = m;
                }
            });

            // Find correct next milestone
            for (let m of milestones) {
                if (totalPct < m.pct) {
                    nextMilestone = m;
                    break;
                }
            }

            container.innerHTML = html;

            if (totalPct < 0) {
                fill.style.width = '0%';
                text.textContent = `${totalPct.toFixed(1)}% - Recover first!`;
            } else {
                const range = nextMilestone.pct - prevMilestone.pct;
                const progress = totalPct - prevMilestone.pct;
                const pct = Math.min(100, Math.max(0, (progress / range) * 100));
                fill.style.width = `${pct}%`;
                fill.style.background = `linear-gradient(90deg, ${prevMilestone.color}, ${nextMilestone.color})`;
                text.textContent = `${totalPct.toFixed(1)}% ‚Üí ${nextMilestone.icon} ${nextMilestone.label} (${(nextMilestone.pct - totalPct).toFixed(1)}% to go)`;
            }
        }

        function renderWeeks(weeks) {
            const container = document.getElementById('week-bracket');
            let html = '';

            weeks.forEach(w => {
                const color = w.r >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';
                html += `
                    <div class="week-card" style="border-left-color: ${color};">
                        <div class="week-header">
                            <span>${w.label}</span>
                            <span style="color: ${color};">${w.r >= 0 ? '+' : ''}${w.r.toFixed(1)}R</span>
                        </div>
                        <div class="week-meta">${w.pct >= 0 ? '+' : ''}${w.pct.toFixed(1)}% | W:${w.wins} L:${w.losses}</div>
                        ${w.trades.map(t => {
                            const tc = t.r >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';
                            return `
                                <div class="trade-row">
                                    <span><span style="color: ${tc};">${t.r >= 0 ? '‚úì' : '‚úï'}</span> ${t.sym} <span style="color: var(--text-muted);">${t.dir}</span></span>
                                    <span style="color: ${tc};">${t.r >= 0 ? '+' : ''}${t.r.toFixed(1)}R</span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Load default scenario
        loadScenario('winning');
    </script>
</body>
</html>
